# Техническое задание: Командная строка управления светодиодами

---

## 1. Назначение  
Программа предназначена для управления состоянием светодиодов через командную строку. Команды передаются в микроконтроллер через **UART-интерфейс**. Пользователь отправляет команды для включения/выключения светодиода по его номеру, а программа возвращает результат выполнения.

---

## 2. Требования к функционалу  

### Входные данные  
- Команда принимается в формате: `<команда> <номер_светодиода>\r`.  
- Передача команд осуществляется через **UART** (последовательный интерфейс).  
  Примеры:  
  - `on 1\r` — включить светодиод 1.  
  - `off 3\r` — выключить светодиод 3.  

### Формат команды  
1. **Допустимые команды**:  
   - `on` — включить светодиод.  
   - `off` — выключить светодиод.  
2. **Номер светодиода**:  
   - Целое неотрицательное число в диапазоне **0-3**.  
3. **Завершение команды**:  
   - Символ `\r` (Carriage Return).  

### Выходные данные  
- При успешном выполнении: строка `ok`.  
- При ошибке: строка `error invalid arguments`.  

---

## 3. Условия возникновения ошибок  
Программа возвращает `error invalid arguments` в случаях:  
1. Некорректная команда (не `on` или `off`).  
2. Некорректный номер светодиода:  
   - Не целое число.  
   - Выход за диапазон **0-3**.  
3. Неверное количество аргументов:  
   - Меньше или больше двух элементов (команда + номер).  

Примеры ошибок:  
- `onn 2\r` — неверная команда.  
- `on a\r` — некорректный номер.  
- `on 4\r` — выход за диапазон.  
- `on 1 2\r` — лишние аргументы.  
- `on3\r` — отсутствие пробела.  

---

## 4. Примеры использования  

| Ввод             | Вывод                     |  
|------------------|---------------------------|  
| `on 0\r`         | `ok`                      |  
| `off 3\r`        | `ok`                      |  
| `enable 2\r`     | `error invalid arguments` |  
| `on 4\r`         | `error invalid arguments` |  
| `on abc\r`       | `error invalid arguments` |  

---

## 5. Требования к реализации  
- Программа должна обрабатывать ввод построчно.  
- Ответ (`ok` или `error invalid arguments`) выводится сразу после обработки команды.  
- Проверка корректности аргументов выполняется в порядке:  
  1. Наличие команды `on`/`off`.  
  2. Корректность номера светодиода (целое число в диапазоне **1-3**).  
  3. Проверка количества аргументов (ровно два).  

---

## 6. Дополнительные условия  
- Программа не требует реального управления светодиодами, только валидацию команд.  
- Исходный код должен быть размещен в папке **src**.  
- **Реализация для микроконтроллера**:  
  - Команды принимаются через **UART-интерфейс** платы **Nucleo F767ZI**.  
  - Настройки UART по умолчанию для ST-LINK:  
    - Скорость передачи: **115200 бод**.  
    - Бит данных: **8**.  
    - Стоп-бит: **1**.  
    - Контроль четности: **Нет**.  
  - **Режим работы UART**:  
    - Допускается использование **непрерывного опроса (polling)** или **обработки по прерыванию (interrupt-driven)**.  
    - Выбор метода остается за разработчиком, но должен обеспечивать стабильный прием данных без потерь.  
  - Ответы отправляются обратно через тот же UART-канал.  

--- 

**Примечание**:  
- Для тестирования используйте:  
  - Эмуляторы UART (PuTTY, Arduino Serial Monitor) с настройками: **115200-8-N-1**.  
  - Плата Nucleo F767ZI подключается к компьютеру через USB-порт (виртуальный COM-порт ST-LINK).  
  - Убедитесь, что терминал настроен на распознавание символа `\r` как конца строки.  